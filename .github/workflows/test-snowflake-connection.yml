- name: Test Snowflake Login
env:
  SNOWFLAKE_ACCOUNT: ${{ secrets.SNOWFLAKE_ACCOUNT }}
  SNOWFLAKE_USERNAME: ${{ secrets.SNOWFLAKE_USERNAME }}
  SNOWFLAKE_PASSWORD: ${{ secrets.SNOWFLAKE_PASSWORD }}
  SNOWFLAKE_ROLE: ${{ secrets.SNOWFLAKE_ROLE }}
  SNOWFLAKE_WAREHOUSE: ${{ secrets.SNOWFLAKE_WAREHOUSE }}
  SNOWFLAKE_DATABASE: ${{ secrets.SNOWFLAKE_DATABASE }}
  SNOWFLAKE_SCHEMA: ${{ secrets.SNOWFLAKE_SCHEMA }}
run: |
  echo "‚è≥ Connecting to Snowflake..."

  snow sql --query "SELECT CURRENT_TIMESTAMP;" \
    --connection '{
      "account": "'"$SNOWFLAKE_ACCOUNT"'",
      "username": "'"$SNOWFLAKE_USERNAME"'",
      "password": "'"$SNOWFLAKE_PASSWORD"'",
      "role": "'"$SNOWFLAKE_ROLE"'",
      "warehouse": "'"$SNOWFLAKE_WAREHOUSE"'",
      "database": "'"$SNOWFLAKE_DATABASE"'",
      "schema": "'"$SNOWFLAKE_SCHEMA"'"
    }'
